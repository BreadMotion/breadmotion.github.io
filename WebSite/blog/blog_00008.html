<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Discord Bot のアーキテクチャを見直した話 | PanKUN Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Discord Bot の構成メモ コマンド／イベントをプラグイン的に追加" />
    <meta name="view-transition" content="same">

    <link rel="canonical" href="https://breadmotion.github.io/WebSite/blog/blog_00008.html" />
    <link rel="alternate" hreflang="ja" href="https://breadmotion.github.io/WebSite/blog/blog_00008.html" />
    <link rel="alternate" hreflang="en" href="https://breadmotion.github.io/WebSite/blog/en/blog_00008.html" />
    <link rel="alternate" hreflang="x-default" href="https://breadmotion.github.io/WebSite/blog/en/blog_00008.html" />
    <!-- Google AdSense -->
<script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5284984614496391"
    crossorigin="anonymous"
></script>

    <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://breadmotion.github.io/WebSite/blog/blog_00008.html"
  },
  "headline": "Discord Bot のアーキテクチャを見直した話",
  "description": "Discord Bot の構成メモ コマンド／イベントをプラグイン的に追加",
  "image": [
    "https://breadmotion.github.io/WebSite/assets/img/thumbnails/blog_00008.png"
  ],
  "datePublished": "2025-02-01T00:00:00.000Z",
  "dateModified": "2025-02-01T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "PanKUN",
    "url": "https://breadmotion.github.io/WebSite"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PanKUN",
    "logo": {
      "@type": "ImageObject",
      "url": "https://breadmotion.github.io/WebSite/assets/img/favicon-192.png"
    }
  }
}</script>
    <meta property="og:title" content="Discord Bot のアーキテクチャを見直した話 | PanKUN Blog" />
    <meta property="og:description" content="Discord Bot の構成メモ コマンド／イベントをプラグイン的に追加" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://breadmotion.github.io/WebSite/blog/blog_00008.html" />
    <meta property="og:image" content="https://breadmotion.github.io/WebSite/assets/img/thumbnails/blog_00008.png" />
    <meta property="og:site_name" content="PanKUN" />
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="icon" type="image/png" href="../assets/img/favicon-32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../assets/img/favicon-192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="../assets/img/favicon-192.png">
    <link rel="stylesheet" href="../assets/css/base.css" />
    <link rel="stylesheet" href="../assets/css/layout.css" />
    <link rel="stylesheet" href="../assets/css/blog.css" />
    <link rel="stylesheet" href="../assets/css/transition.css" />
  </head>
  <body data-page="blog">
    <div class="page-shell">
      <main class="main-container">
        <div class="post-layout">
          <div class="post-content">
            <article class="post-detail">
              <nav aria-label="breadcrumb" class="breadcrumb">
                <ol class="breadcrumb__list">
                  <li class="breadcrumb__item"><a href="../index.html">ホーム</a></li>
                  <li class="breadcrumb__item"><a href="../blog.html">ブログ</a></li>
                  <li class="breadcrumb__item" aria-current="page">Discord Bot のアーキテクチャを見直した話</li>
                </ol>
              </nav>
              <header class="post-detail__header">
                <p class="post-detail__meta">2025/02/01 / Discord</p>
                <h1 class="post-detail__title">Discord Bot のアーキテクチャを見直した話</h1>
                <p class="post-detail__description">Discord Bot の構成メモ コマンド／イベントをプラグイン的に追加</p>
                <p class="post-detail__tags"><a class="tag" href="../blog.html?tag=discord">discord</a> <a class="tag" href="../blog.html?tag=nodejs">nodejs</a> <a class="tag" href="../blog.html?tag=architecture">architecture</a> <a class="tag" href="../blog.html?tag=plugin">plugin</a> <a class="tag" href="../blog.html?tag=tool">tool</a></p>
                <div class="share-buttons">
    <p class="share-buttons__title">SHARE</p>
    <ul class="share-buttons__list">
      
        <li class="share-buttons__item">
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fbreadmotion.github.io%2FWebSite%2Fblog%2Fblog_00008.html&text=Discord%20Bot%20%E3%81%AE%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E3%82%92%E8%A6%8B%E7%9B%B4%E3%81%97%E3%81%9F%E8%A9%B1" class="share-buttons__link share-buttons__link--twitter" target="_blank" rel="noopener noreferrer" aria-label="Twitterでシェア">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg>
          </a>
        </li>
      
        <li class="share-buttons__item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbreadmotion.github.io%2FWebSite%2Fblog%2Fblog_00008.html" class="share-buttons__link share-buttons__link--facebook" target="_blank" rel="noopener noreferrer" aria-label="Facebookでシェア">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 2-2h1.5V2.14c-.326-.043-1.557-.14-2.857-.14C11.928 2 10 3.657 10 6.7v2.8H7v4h3V22h4z"></path></svg>
          </a>
        </li>
      
        <li class="share-buttons__item">
          <a href="https://social-plugins.line.me/lineit/share?url=https%3A%2F%2Fbreadmotion.github.io%2FWebSite%2Fblog%2Fblog_00008.html" class="share-buttons__link share-buttons__link--line" target="_blank" rel="noopener noreferrer" aria-label="LINEでシェア">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M21.5,4.9C20.2,3.7,18.6,3,16.9,3c-3.7,0-6.8,2.8-7.2,6.4c-0.1,0.5-0.1,1-0.1,1.6c0,0-0.1,0.2-0.2,0.3c-0.3,0.3-0.7,0.2-1.2,0.1C7.8,11,7.4,10.8,7,10.7c-0.2-0.1-0.4-0.1-0.6-0.1c-0.3,0-0.6,0-0.8,0.1c-0.3,0.1-0.5,0.3-0.5,0.6c0,0.2,0.1,0.4,0.2,0.5c0.2,0.2,0.5,0.4,0.8,0.6c0.7,0.4,1.5,0.8,2.2,1.2c0.2,0.1,0.3,0.2,0.3,0.3c0,0.1,0,0.2-0.1,0.3C8.4,14.6,8,15,7.5,15.4c-0.2,0.2-0.4,0.3-0.5,0.5c-0.1,0.2-0.2,0.4-0.2,0.6c0,0.3,0.1,0.6,0.4,0.8C7.5,17.5,8,17.7,8.5,17.7c0.2,0,0.4-0.1,0.6-0.1c0.5-0.2,1-0.5,1.5-0.8c0.2-0.1,0.3-0.2,0.5-0.2c0.1,0,0.2,0,0.2,0.1c0.3,0.3,0.6,0.8,0.8,1.3c0.1,0.1,0.1,0.2,0.1,0.3c0,0.4-0.2,0.9-0.5,1.4c-0.1,0.2-0.2,0.3-0.2,0.5c0,0.2,0,0.4,0.1,0.5c0.1,0.2,0.3,0.3,0.5,0.4c0.2,0.1,0.5,0.1,0.7,0.1c0.6,0,1.2-0.2,1.7-0.6c0.1-0.1,0.2-0.2,0.3-0.2c0.1,0,0.2,0,0.3,0.1c0.7,0.5,1.5,0.8,2.4,0.8c3.7,0,6.8-2.8,7.2-6.4c0-0.1,0.1-0.2,0.1-0.4c0-0.1,0-0.2,0-0.3c0-0.1,0-0.1,0-0.2c0,0,0-0.1,0-0.1C22.2,9,22.2,8.9,22.2,8.8c0,0,0,0,0,0c0-0.2,0-0.4,0-0.6c-0.1-0.8-0.2-1.5-0.4-2.2C21.6,5.5,21.6,5.2,21.5,4.9z M16.9,4c1.5,0,2.9,0.6,3.9,1.6c0.1,0.1,0.1,0.2,0.1,0.3c0.3,0.7,0.5,1.4,0.5,2.2c0,0.2,0,0.3,0,0.5c0,0,0,0.1,0,0.1c0,0.1,0,0.1,0,0.2c0,0,0,0.1,0,0.1c0,0,0,0,0,0c0,0.1-0.1,0.2-0.1,0.3c-0.3,3.1-3.1,5.4-6.3,5.4c-0.8,0-1.6-0.2-2.3-0.6c-0.1-0.1-0.2-0.1-0.3-0.1c-0.1,0-0.3,0.1-0.4,0.2c-0.5,0.4-1.1,0.6-1.7,0.6c-0.1,0-0.2,0-0.3-0.1c-0.1,0-0.1-0.1-0.1-0.1c0-0.1,0.1-0.2,0.1-0.2c0.2-0.5,0.5-0.9,0.7-1.3c0.1-0.1,0.1-0.3,0.1-0.5c0-0.1-0.1-0.2-0.2-0.3c-0.2-0.2-0.5-0.5-0.8-0.8c-0.1-0.1-0.1-0.2-0.1-0.3c0-0.2,0.1-0.4,0.2-0.5c0.5-0.4,0.9-0.8,1.1-1.1c0.1-0.1,0.1-0.2,0.1-0.3c0-0.1-0.1-0.1-0.1-0.2c-0.7-0.4-1.4-0.8-2.1-1.1c-0.3-0.2-0.5-0.3-0.7-0.5c-0.1-0.1-0.2-0.2-0.2-0.3c0-0.1,0.1-0.2,0.1-0.2c0.1,0,0.2-0.1,0.3-0.1c0.2,0,0.5,0.1,0.6,0.1c0.4,0.1,0.9,0.4,1.2,0.5c0.5,0.2,0.9,0.2,1.2,0.1c0.1,0,0.1,0,0.2-0.1c0.3-3.1,3.1-5.4,6.3-5.4z M9.5,8.8C9.2,8.8,9,9,9,9.3v1.8c0,0.3,0.2,0.5,0.5,0.5h1.3c0.3,0,0.5-0.2,0.5-0.5V9.3c0-0.3-0.2-0.5-0.5-0.5H9.5z M14.8,8.8c-0.3,0-0.5,0.2-0.5,0.5v1.8c0,0.3,0.2,0.5,0.5,0.5h1.3c0.3,0,0.5-0.2,0.5-0.5V9.3c0-0.3-0.2-0.5-0.5-0.5H14.8z"></path></svg>
          </a>
        </li>
      
    </ul>
  </div>
              </header>
              <section class="post-detail__body markdown-body"><p>こんにちは!パン君です。</p>
<p>この記事では、個人で運用している <strong>Discord Bot のアーキテクチャをどう組み直したか</strong> をまとめます。</p>
<p>やりたかったことはざっくりいうと、</p>
<ul>
<li>コマンドやイベントを「 <strong>ファイルを追加するだけ</strong> 」で拡張できる  </li>
<li>サーバー上では <code>pm2</code> で常駐管理  </li>
<li><code>git pull</code> ＋シェルスクリプトで <strong>半自動デプロイ</strong>  </li>
<li>将来的に「管理用 Web ページ」や「API」とも連携しやすくしておく</li>
</ul>
<p>という構成です。</p>
<hr>
<h2 id="目標と前提">目標と前提</h2><h3 id="目標">目標</h3><ol>
<li><strong>Bot 本体をコア／プラグインに分離</strong><ul>
<li>コマンドやイベントは「後から足せるモジュール」として扱う。</li>
</ul>
</li>
<li><strong>運用を楽にする</strong><ul>
<li>Ubuntu サーバー上で <code>pm2</code> にお任せして、SSH を切っても動き続ける。</li>
</ul>
</li>
<li><strong>デプロイをシンプルにする</strong><ul>
<li>管理用リポジトリに push → サーバー側で pull ＋再起動するだけ。</li>
</ul>
</li>
</ol>
<h3 id="前提">前提</h3><ul>
<li>言語：Node.js（TypeScript も見据えつつ、現在は主に JS）</li>
<li>ライブラリ：discord.js</li>
<li>実行環境：Ubuntu Server + pm2</li>
<li>外部アクセス：playit.gg でトンネルを張って、外部から接続可能</li>
</ul>
<hr>
<h2 id="ディレクトリ構成">ディレクトリ構成</h2><p>最終的に落ち着いた構成はこんな感じです。</p>
<pre><code class="language-text">bot-root/
├── Command/        # コマンドモジュール
├── Event/          # イベントハンドラ
├── Data/           # JSON 等の設定・永続データ
├── Class/          # 共通クラス・ヘルパ
├── Shell/          # デプロイ用シェルスクリプト
├── types/          # JSDoc など型関連
├── logs/           # pm2 のログ出力先
├── config.json     # トークンや設定（dotenv でも可）
└── index.js        # エントリポイント（コア）
</code></pre>
<p>ポイントは <strong>Command / Event / Data を完全に分離</strong> したことです。</p>
<ul>
<li>index.js(コア)は「モジュールを読み込んでWiringするだけ」</li>
<li>コマンドの中身は Command/ 下のJSファイルが担当</li>
<li>イベントは Event/ 下のJSファイルが担当
という形にすることで、 <strong>Bot本体を触らずに機能追加</strong> ができるようになりました。</li>
</ul>
<h2 id="コマンドのプラグイン構造">コマンドのプラグイン構造</h2><h3 id="コマンドモジュールの形">コマンドモジュールの形</h3><p>各コマンドは大体こんな形のJSファイルを１ファイルで持ちます。</p>
<pre><code class="language-js">// Command/ping.js
/** @type {import(&#39;../types&#39;).BotCommand} */
module.exports = {
  name: &quot;ping&quot;,
  description: &quot;疎通確認用コマンド&quot;,
  options: [],
  async execute(interaction, context) {
    const start = Date.now();
    await interaction.reply(&quot;Pong!&quot;);
    const ms = Date.now() - start;
    console.log(`[ping] latency: ${ms}ms`);
  },
};
</code></pre>
<ul>
<li>name / description / options はそのまま slash command の定義に流用</li>
<li>execute には interaction と共通の context（設定・ロガーなど）を渡す</li>
</ul>
<h3 id="動的読み込み">動的読み込み</h3><p>コア側では、起動時に Command/ ディレクトリを走査して全部読み込みます。</p>
<p>やっていることはシンプルで、</p>
<ol>
<li>fs.readdirSync(&quot;Command&quot;) で .js ファイル一覧を取得</li>
<li>require して name をキーに Map に登録</li>
<li>slash command の登録用に JSON を組み立てる
という流れです。</li>
</ol>
<p>このおかげで、新しいコマンドを追加するときは</p>
<ol>
<li>Command/ に JS ファイルを作る</li>
<li>Git に commit ＋ push</li>
<li>サーバーで pull して再起動
だけで済むようになりました。</li>
</ol>
<h3 id="イベントハンドラの構造">イベントハンドラの構造</h3><p>イベントもコマンドと同じノリでファイルベースにしています。</p>
<pre><code class="language-js">// Event/ready.js
/** @type {import(&#39;../types&#39;).BotEvent} */
module.exports = {
  name: &quot;ready&quot;,
  once: true,
  execute(client, context) {
    console.log(`[ready] Logged in as ${client.user.tag}`);
  },
};
</code></pre>
<pre><code class="language-js">// Event/interactionCreate.js
module.exports = {
  name: &quot;interactionCreate&quot;,
  once: false,
  async execute(interaction, context) {
    if (!interaction.isChatInputCommand()) return;

    const command = context.commands.get(interaction.commandName);
    if (!command) return;

    try {
      await command.execute(interaction, context);
    } catch (err) {
      console.error(err);
      if (!interaction.replied) {
        await interaction.reply({
          content: &quot;エラーが発生しました。&quot;,
          ephemeral: true,
        });
      }
    }
  },
};
</code></pre>
<p>コア側では、Event/ を走査して<br><code>client.on(event.name, handler) or client.once(...)</code><br>を自動で登録するだけにしています。</p>
<hr>
<h2 id="pm2とデプロイフロー">pm2とデプロイフロー</h2><h3 id="pm2での常駐">pm2での常駐</h3><p>Ubuntu Server 上では pm2 を使って常駐させています。</p>
<pre><code class="language-bash">pm2 start index.js --name bread-bot
pm2 save
pm2 startup
</code></pre>
<ul>
<li>SSH を切っても Bot は動き続ける</li>
<li>pm2 logs bread-bot でログ確認</li>
<li>pm2 restart bread-bot で反映</li>
</ul>
<p>という基本の運用です。</p>
<h3 id="デプロイ用スクリプト">デプロイ用スクリプト</h3><p>デプロイはシンプルに Shell/ に 1 本スクリプトを置きました。</p>
<pre><code class="language-bash">#!/usr/bin/env bash
set -eu

cd /opt/bread-bot

echo &quot;[deploy] git pull&quot;
git pull origin main

echo &quot;[deploy] npm install&quot;
npm install --production

echo &quot;[deploy] restart pm2&quot;
pm2 restart bread-bot
</code></pre>
<ul>
<li>リポジトリを更新 → サーバー側でこのスクリプト実行</li>
<li>将来的には Webhook や CI から叩いてもよい</li>
</ul>
<p>という形にしています。</p>
<hr>
<h2 id="これからやりたい拡張">これからやりたい拡張</h2><p>現状でも「コマンドを JS 1 ファイルで追加できる Bot」になりましたが、さらにやりたいのはこのあたりです。</p>
<ol>
<li><strong>型まわりの強化</strong></li>
</ol>
<ul>
<li>TypeScript 化 or JSDoc で interaction / context に型をつける</li>
<li>ApplicationCommandOptionData を定義専用のヘルパにまとめる</li>
</ul>
<ol start="2">
<li><strong>管理用 Web ページとの連携</strong></li>
</ol>
<ul>
<li>Express / Fastify などで API を立てて</li>
<li>「今登録されているコマンド一覧」や「Guild 状態」を Web から確認</li>
</ul>
<p>3.ログとメトリクス</p>
<ul>
<li>エラーや特定イベントを別チャンネルに送る</li>
<li>Cloud 上のログ基盤に送るところまで視野に入れる</li>
</ul>
<hr>
<h2 id="まとめ">まとめ</h2><ul>
<li>コマンド／イベントを ディレクトリ単位で分割して、Bot 本体は「読み込んで繋ぐだけ」にする</li>
<li>pm2 と簡単なシェルスクリプトで、運用とデプロイをシンプルにする</li>
<li>将来の拡張（Web 管理画面や API）を見据えて、context という共通オブジェクトをコマンドに渡す</li>
</ul>
<p>こういう形にしたことで、 「1つの巨大な index.js に全部書いてある Discord Bot」から、だいぶ卒業できた気がします。</p>
<p>同じように Bot を長期運用したい人の参考になれば嬉しいです。</p>
<hr>
</section>
              <div class="share-buttons">
    <p class="share-buttons__title">SHARE</p>
    <ul class="share-buttons__list">
      
        <li class="share-buttons__item">
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fbreadmotion.github.io%2FWebSite%2Fblog%2Fblog_00008.html&text=Discord%20Bot%20%E3%81%AE%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E3%82%92%E8%A6%8B%E7%9B%B4%E3%81%97%E3%81%9F%E8%A9%B1" class="share-buttons__link share-buttons__link--twitter" target="_blank" rel="noopener noreferrer" aria-label="Twitterでシェア">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg>
          </a>
        </li>
      
        <li class="share-buttons__item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbreadmotion.github.io%2FWebSite%2Fblog%2Fblog_00008.html" class="share-buttons__link share-buttons__link--facebook" target="_blank" rel="noopener noreferrer" aria-label="Facebookでシェア">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 2-2h1.5V2.14c-.326-.043-1.557-.14-2.857-.14C11.928 2 10 3.657 10 6.7v2.8H7v4h3V22h4z"></path></svg>
          </a>
        </li>
      
        <li class="share-buttons__item">
          <a href="https://social-plugins.line.me/lineit/share?url=https%3A%2F%2Fbreadmotion.github.io%2FWebSite%2Fblog%2Fblog_00008.html" class="share-buttons__link share-buttons__link--line" target="_blank" rel="noopener noreferrer" aria-label="LINEでシェア">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M21.5,4.9C20.2,3.7,18.6,3,16.9,3c-3.7,0-6.8,2.8-7.2,6.4c-0.1,0.5-0.1,1-0.1,1.6c0,0-0.1,0.2-0.2,0.3c-0.3,0.3-0.7,0.2-1.2,0.1C7.8,11,7.4,10.8,7,10.7c-0.2-0.1-0.4-0.1-0.6-0.1c-0.3,0-0.6,0-0.8,0.1c-0.3,0.1-0.5,0.3-0.5,0.6c0,0.2,0.1,0.4,0.2,0.5c0.2,0.2,0.5,0.4,0.8,0.6c0.7,0.4,1.5,0.8,2.2,1.2c0.2,0.1,0.3,0.2,0.3,0.3c0,0.1,0,0.2-0.1,0.3C8.4,14.6,8,15,7.5,15.4c-0.2,0.2-0.4,0.3-0.5,0.5c-0.1,0.2-0.2,0.4-0.2,0.6c0,0.3,0.1,0.6,0.4,0.8C7.5,17.5,8,17.7,8.5,17.7c0.2,0,0.4-0.1,0.6-0.1c0.5-0.2,1-0.5,1.5-0.8c0.2-0.1,0.3-0.2,0.5-0.2c0.1,0,0.2,0,0.2,0.1c0.3,0.3,0.6,0.8,0.8,1.3c0.1,0.1,0.1,0.2,0.1,0.3c0,0.4-0.2,0.9-0.5,1.4c-0.1,0.2-0.2,0.3-0.2,0.5c0,0.2,0,0.4,0.1,0.5c0.1,0.2,0.3,0.3,0.5,0.4c0.2,0.1,0.5,0.1,0.7,0.1c0.6,0,1.2-0.2,1.7-0.6c0.1-0.1,0.2-0.2,0.3-0.2c0.1,0,0.2,0,0.3,0.1c0.7,0.5,1.5,0.8,2.4,0.8c3.7,0,6.8-2.8,7.2-6.4c0-0.1,0.1-0.2,0.1-0.4c0-0.1,0-0.2,0-0.3c0-0.1,0-0.1,0-0.2c0,0,0-0.1,0-0.1C22.2,9,22.2,8.9,22.2,8.8c0,0,0,0,0,0c0-0.2,0-0.4,0-0.6c-0.1-0.8-0.2-1.5-0.4-2.2C21.6,5.5,21.6,5.2,21.5,4.9z M16.9,4c1.5,0,2.9,0.6,3.9,1.6c0.1,0.1,0.1,0.2,0.1,0.3c0.3,0.7,0.5,1.4,0.5,2.2c0,0.2,0,0.3,0,0.5c0,0,0,0.1,0,0.1c0,0.1,0,0.1,0,0.2c0,0,0,0.1,0,0.1c0,0,0,0,0,0c0,0.1-0.1,0.2-0.1,0.3c-0.3,3.1-3.1,5.4-6.3,5.4c-0.8,0-1.6-0.2-2.3-0.6c-0.1-0.1-0.2-0.1-0.3-0.1c-0.1,0-0.3,0.1-0.4,0.2c-0.5,0.4-1.1,0.6-1.7,0.6c-0.1,0-0.2,0-0.3-0.1c-0.1,0-0.1-0.1-0.1-0.1c0-0.1,0.1-0.2,0.1-0.2c0.2-0.5,0.5-0.9,0.7-1.3c0.1-0.1,0.1-0.3,0.1-0.5c0-0.1-0.1-0.2-0.2-0.3c-0.2-0.2-0.5-0.5-0.8-0.8c-0.1-0.1-0.1-0.2-0.1-0.3c0-0.2,0.1-0.4,0.2-0.5c0.5-0.4,0.9-0.8,1.1-1.1c0.1-0.1,0.1-0.2,0.1-0.3c0-0.1-0.1-0.1-0.1-0.2c-0.7-0.4-1.4-0.8-2.1-1.1c-0.3-0.2-0.5-0.3-0.7-0.5c-0.1-0.1-0.2-0.2-0.2-0.3c0-0.1,0.1-0.2,0.1-0.2c0.1,0,0.2-0.1,0.3-0.1c0.2,0,0.5,0.1,0.6,0.1c0.4,0.1,0.9,0.4,1.2,0.5c0.5,0.2,0.9,0.2,1.2,0.1c0.1,0,0.1,0,0.2-0.1c0.3-3.1,3.1-5.4,6.3-5.4z M9.5,8.8C9.2,8.8,9,9,9,9.3v1.8c0,0.3,0.2,0.5,0.5,0.5h1.3c0.3,0,0.5-0.2,0.5-0.5V9.3c0-0.3-0.2-0.5-0.5-0.5H9.5z M14.8,8.8c-0.3,0-0.5,0.2-0.5,0.5v1.8c0,0.3,0.2,0.5,0.5,0.5h1.3c0.3,0,0.5-0.2,0.5-0.5V9.3c0-0.3-0.2-0.5-0.5-0.5H14.8z"></path></svg>
          </a>
        </li>
      
    </ul>
  </div>
              <div class="post-detail__nav post-detail__nav--bottom">
                <a href="../blog.html" class="btn btn--back">← ブログ一覧へ戻る</a>
              </div>
            </article>
          </div>
          <aside class="post-sidebar">
            <div class="toc-sticky-container">
              <nav class="toc">
                <h2 class="toc__title">目次</h2>
                <ul class="toc-list"><li class="toc-item toc-item--level-2"><a href="#目標と前提">目標と前提</a></li><li class="toc-item toc-item--level-3"><a href="#目標">目標</a></li><li class="toc-item toc-item--level-3"><a href="#前提">前提</a></li><li class="toc-item toc-item--level-2"><a href="#ディレクトリ構成">ディレクトリ構成</a></li><li class="toc-item toc-item--level-2"><a href="#コマンドのプラグイン構造">コマンドのプラグイン構造</a></li><li class="toc-item toc-item--level-3"><a href="#コマンドモジュールの形">コマンドモジュールの形</a></li><li class="toc-item toc-item--level-3"><a href="#動的読み込み">動的読み込み</a></li><li class="toc-item toc-item--level-3"><a href="#イベントハンドラの構造">イベントハンドラの構造</a></li><li class="toc-item toc-item--level-2"><a href="#pm2とデプロイフロー">pm2とデプロイフロー</a></li><li class="toc-item toc-item--level-3"><a href="#pm2での常駐">pm2での常駐</a></li><li class="toc-item toc-item--level-3"><a href="#デプロイ用スクリプト">デプロイ用スクリプト</a></li><li class="toc-item toc-item--level-2"><a href="#これからやりたい拡張">これからやりたい拡張</a></li><li class="toc-item toc-item--level-2"><a href="#まとめ">まとめ</a></li></ul>
              </nav>
            </div>
          </aside>
        </div>
        <section class="section section--related">
          <h2 class="section__title">undefined</h2>
          <div id="relatedList" class="recommend-grid"></div>
        </section>
        <section class="section section--recommend">
          <h2 class="section__title">おすすめ記事</h2>
          <div id="recommendList" class="recommend-grid"></div>
        </section>
      </main>
      <div class="toc-overlay"></div>
      <button type="button" class="toc-toggle" aria-label="目次を開く">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20" aria-hidden="true"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"></path></svg>
        <span>目次</span>
      </button>
    </div>
    <script src="../assets/js/layout.js" defer></script>
    <script src="../assets/js/ui.js"></script>
    <canvas id="menuAnimationCanvas"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script src="../assets/js/particles.js"></script>
    <script src="../assets/js/toc.js" defer></script>
    <script src="../assets/js/recommend.js" defer></script>
    <script src="../assets/js/transition.js"></script>
  </body>
</html>